無論你是要將Windows 7設定「自動取得IP」或是「固定IP」，在到達設定IP的畫面之前，所有的步驟都是一樣的，請依照以下的步驟設定：
Step 1. 點擊左下角的「開始」功能表，接著點擊「控制台」，如下圖：
LocalNetwork-1.jpg
Step 2. 接著點擊「網路和網際網路」中的「檢視網路狀態及工作」，如下圖：
LocalNetwork-2.jpg
Step 3. 順利開啟「網路和共用中心」後，再從左邊的項目中點擊「變更介面卡設定」，如下圖
LocalNetwork-3.jpg
Step 4. 來到「網路連線」的頁面中，每個人的頁面內容可能就不太相同了，從下圖可以看到有兩個「Local Area Connection」，兩個「VMware Network Adapter」，以及「Wireless Network Connection」，「Local Area Connection」為「有線的網路卡」，主機後面有幾個網路卡插槽，就有幾個「Local Area Connection」；「VMware Network Adapter」是VMware的虛擬網路卡，電腦中要有安裝VMware軟體，電腦中才會有這玩意；而最後的「Wireless Network Connection」代表的是「無線的網路卡」。
　　所以，一般人的桌上型電腦，會有一或兩個「Local Area Connection」，而在筆記型電腦中，應該都會有一個「Local Area Connection」及一個「Wireless Network Connection」，說了這麼多，那到底要設定的網路卡是哪一個呢？那要問你自己才知道吧! 你要知道你現在是要透過哪一個網路卡來上網，當然通常我們要設定的都是「Local Area Connection」，因為大部份的人的Cable Modem或是ADSL都是透過有線的方式來連接。
　　了解自己是透過哪一個網路卡上網之後，在那一個網路卡的上方按滑鼠右鍵，並點選「內容」，如下圖：
LocalNetwork-4.jpg
Step 5. 接著從清單中點選「網際網路通訊協定第4版(TCP/IPv4)」，並點擊下方的〔內容〕，如下圖：
LocalNetwork-5.jpg

 
「自動取得IP」或「固定IP」
Step 6. 終於來到最後的設定畫面了，如果你要設定的是「自動取得IP」，就依照下圖，點擊「自動取得IP位址」及「自動取得DNS伺服器位址」；如果你要設定的是「固定IP」的話，則請跳過這一步，直接到Step 7。
LocalNetwork-6.jpg
Step 7. 如下圖，我將電腦的IP設定為「192.168.0.10」，而下面的「子網路遮罩」可以不用管它，一旦你輸入完IP位址後，點一下子網路遮罩的任一個位置，它的數值就會被自動填入。
LocalNetwork-7.jpg

 IPv4使用32位元代表著，換算下來約42億多個位址，再減去一些特殊保留位址，無法分配給主機使用，實際上遠少於理論數字。再加上早期網路剛起步時，沒有人預期到現今上網裝置會如此普遍、氾濫，常常IP位址一發放就是一個/8範圍配給一家公司或大學，導致現今IPv4位址嚴重不足。

IPv4以32位元的數值代表網路位址，/8的意思就是前8個位元不變的意思。 例如說某公司分配到111.0.0.0/8的位址空間，代表這家公司有111.0.0.0－111.255.255.255的位址空間（包含不可以當作主機位置的空間）， 也可以當作計算子網路遮罩方法，例如一個IP：192.168.0.1/24，它的子網路遮罩就是255.255.255.0，若是192.168.0.1/32，子網路遮罩就是255.255.255.255。

在2011年2月3日，全球掌管IP位址配發的最高機構ICANN（Internet Corporation for Assigned Names and Numbers）將最後5個/8區段位址分配給全球5個區域網際網路註冊組織之後，ICANN手上就沒有IPv4的位址可供分配，IPv4的位址枯竭正式進入倒數計時。

IP位址如何配發

IP位址原先由IANA（Internet Assigned Numbers Authority）負責，於1998年至1999年間將業務移交給ICANN，IANA成為ICANN的一個部門。

ICANN現階段掌管全球IP位址配發的部分，先將IP配發給全球5個區域性管理組織：ARIN（北美和部分加勒比海地區）、RIPE NCC（歐洲、中東、中亞）、APNIC（亞太）、LACNIC（拉丁美洲和部分加勒比海地區）、AfriNIC（非洲），再由這些區域性組織往下分配到各個國家，像是台灣為TWNIC負責IP申請及配發事務。

IP的Class等級

IPv4將位址切分成Class A～E 5種等級，Class D為群播位址，Class E僅為實驗使用。IPv4為32位元長的一組數字，一般會分成4組，每組8位元並換算成十進位的數字表示，如Google的DNS伺服器8.8.8.8。Class等級由開頭的幾個位元決定，Class A的開頭為0、Class B的開頭為10、Class C的開頭為110。所以筆者拿到前面開頭為1.xxx.xxx.xxx的位址，開頭的8位元為00000001，劃分在Class A中。

Class	位址範圍
A	0.0.0.0～127.255.255.255
B	128.0.0.0～191.255.255.255
C	192.0.0.0～223.255.255.255
APNIC 首先枯竭

負責管理亞太地區IP配發的APNIC，在2011年4月，只剩下最後一個/8位址區段，之後如果想要再申請IP，只能得到最後/8區段其中的/22區段。目前APNIC在2012年7月2號時，剩下93％的/8位址區段。不過全球其他4個區域性管理組織的狀況也不好，預計也將在這1、2年之內進入最後一個/8區段。

這個情形其實相當不樂觀，尤其這幾年手持式連網裝置爆炸性成長，IP位址的消耗更為快速，極有可能在預定的時間之前就把位址使用完畢，雖然可以利用NAT的方式減少實際對外網路IP的需求，但並非長久之計。

還好在90年代初就有人注意到這個問題，並在1998年正式推出下一代的IPv6規範。

關鍵字：NAT

NAT（Network Address Translation）網路位址轉譯，為解決IPv4位址不足的一種方案。簡單來說，有一台具有NAT功能的網路裝置，可以將私有IP和公共IP做轉換。對外傳輸時將封包表頭來源位址的私有IP，也就是大家常見的192.168.xxx.xxx這個位址，替換成公共IP位址傳送出去，並把這個對應關係儲存成一張表格。之後網際網路傳來的封包，表頭目的地位址就可以參考這張表格，看看之前是哪個私有IP所傳出去的封包，將目的地位址改成私有IP，再傳送到正確的位置。多台上網裝置只需使用1個公共IP，即可與其他網際網路上的裝置通訊。

32bits 擴展成 128bits

IPv4的缺點，就是可用位址太少，使用32位元作為網路位址，就算不計那些保留位址，最多也只有42億多個位址可供使用（2^32）。以今日人手好幾支手機，還有桌機加筆電加平板來說，完全是不夠用的。IPv6最大的變革，就是把32位元位址直接擴展到128位元，一舉提升2^96倍容量。甚至有人開玩笑地說，這麼龐大的位址容量，我們就可以拋棄對NAT的依賴，甚至是地球上的每一顆沙子都能配發一個IP。

IPv6 格式與轉換

如同IPv4我們會將32位元拆成4組8位元，再換算成十進位的數字，如常見的私有IP位址：192.168.0.1，IPv6也有一套特殊的寫法。IPv6將128位元拆成8組16位元，每組再換算成16進位的數字，於是過去IPv4不曾出現的a、b、c、d、e，也將會出現在IPv6位址之中。

IPv6的位址寫法：



由上方的例子可以直接觀察到IPv6的位址出現了a、b、c、d、e，分開各組的符號從IPv4的「.」變成「：」。同時也如IPv4一樣，若是各組開頭的數字為0時，0可以不用寫出來，如下面這個例子：



以上2組IPv6的位置是相等的，在第2、3、8組個省略了1個0，在第4、5、6、7組則是各省略了3個0。IPv6在第4、5、6、7組連續為0的狀況下，還可以有個更簡略的寫法，如以下所示：



這2個指的都是同一個位址，在連續為0的情況下，可以直接由「::」2個冒號代替掉。但在同一個位址中，如有2段以上連續為0的情況，則「::」只能使用一次，如下面這個例子：



以上5個例子中，前4個例子皆正確，第1個為完整不縮寫的位址，第2個則是將第2、3組的連續0縮寫，第3個則是將第5、6組的連續0縮寫。最後一個例子不正確，是因為縮寫了2次，而這部分會造成解讀上的混淆，因為這種寫法可以等於下列的任何一種位址：



如果在同一位址有2個以上的「::」縮寫，便會造成解讀混淆的狀況，所以應避免這種情形發生。

如果是IPv4要對應到IPv6的位址，則相當簡單。IPv6中有保留映射到IPv4的位址空間，只需在IPv4的位址前加上::ffff:即可，如下面的例子：



IPv6映射到IPv4的位址，在最後的32位元可以採用IPv4的寫法，也可以轉換成IPv6的寫法。

IPv6位址分類

IPv4的封包傳遞類型分為4種，分別是unicast單播、anycast任播、multicast群播、broadcast廣播。其中broadcast廣播因為安全性問題，在IPv6中不再使用，其他3種則繼續沿用，以下為這3種封包傳遞方式的解說。

unicast單播

unicast是一般我們上網使用最多的封包傳遞方式，封包只丟向單一網路介面。用普通話來說，就是2個人的你丟我撿遊戲。

anycast任播

這種傳播方式會將封包，傳送給一群經指定的網路介面，但同時只會有1個網路介面收到這個封包。通常這1個接收到的網路介面，距離發送端較近（傳輸速度較快），或者是最快到達（中途經過的路由較不壅塞）。Anycast可用來分散伺服器的負載，因為客戶端會自動跟目前狀況最佳的伺服器作互動。同時這種方式也可以抵禦部分的阻斷式服務攻擊，因為被癱瘓的只有離攻擊者較近的伺服器，而非攻擊者指定的伺服器。IPv6封包格式

IPv6當然也會在封包格式上做修改，否則怎麼容納更長的位址資訊？IPv4在封包的表頭會佔去20Bytes以上，因為有可選的欄位，所以表頭長度並不定。IPv6則是固定佔去40Bytes。

首先我們先來談談IPv4表頭中存在，到了IPv6卻消失或改進的欄位。IPv4和IPv6相比之下，多了這幾個欄位：標頭長度、辨識碼、旗標、區段位移、網路協定、檢查碼。

標頭長度

因為IPv4的表頭之後會有個選擇性欄位，標頭長度不固定，以此來判斷IPv4標頭究竟有多長。最短的表頭是20 bytes，最長為60bytes。

壅塞通告

在IPv4裡為可選格式，唯有當通訊兩端和網路底層皆支援時才能發生作用，可以在不遺失封包的前提下，提醒對方網路發生雍塞。辨識碼：是一連串的流水號數字，用以判斷是否在傳輸過程中遺漏了封包，例如只接收到編號1999和編號2001這2個封包，就可以得知遺失了編號2000的封包，此時接收端電腦會要求傳送端重傳一次，或者是傳送端電腦發現沒有收到編號2000的ACK封包，便會自行重傳。

旗標

提供封包分割的控制訊息，例如這個封包攜帶的資料太長，被分割的時候，旗標就為1，代表之後還有資料。如果說旗標為0，代表這個封包是這份資料的最後一個。

分段位移

由於大資料被分割為許多小封包，這個欄位標明了封包所攜帶的資料，是原始資料的哪一部份，就可以依據這個訊息將封包重組為原始資料。

網路協定

標明傳輸層所使用的協定，如TCP或UDP等等。

表頭檢查碼

用以檢查表頭內容是否錯誤，由於IPv4有1個TTL（time to live）限制封包最大經過網路節點數，由於每經過1個網路節點，這個值會減1，所以檢查碼必須重新計算，消耗網路節點效能。

接著就是IPv4存在，IPv6也有的欄位，或者是在IPv6中獲得改進的欄位：

版本

佔據封包最前方4bits，IPv4為4，IPv6當然就是6啦。

差異服務碼

IPv4中用以標明封包內所夾帶的資料類型，例如表明封包內的資料為VoIP，此時若經過支援QoS的路由器，會優先傳遞此類封包。在IPv6中則是轉化為流量等級和流量標記2為2個部分。

總長度

IPv4中用以標示包含表頭，封包整體的長度。在IPv6中改為負載長度，不包含表頭。

TTL

time to live（生存時間），這個欄位宣告封包總共可以經過幾個網路節點，每經過1個網路節點，這個值就會減1。當值為0的時候，封包就會被節點丟棄，避免封包在網路上傳輸過久，影響整體網路效能。到了IPv6，名稱更改為節點限制，但作用是一樣的。最後就是IPv6新增的欄位：

下一個表頭

明確指出表頭後方所跟著的擴充表頭資訊，有可能是一般的TCP，也可能是其他的加密方式。由於擴充表頭具有長度可變的性質，可以彈性紀錄所需資訊。





▲IPv4和IPv6的表頭差異，讀者觀看圖形應該比較容易理解。IPv6雖然因為IP位址變長了，佔去較多位元，但表頭內的欄位較IPv4為少，表頭長度也保持固定，不像IPv4需判斷資料起始位元在哪裡。最重要的是IPv6去除了表頭檢查碼，降低網路節點的負擔。

取消NAT機制

由於IPv6的位址之多，多到地球上的每粒砂都可以擁有位址，因此過往用以解決IPv4位址不夠的方法「NAT」，在IPv6中不再使用。

這麼做的好處是顯而易見的，請試想，在IPv4使用NAT的情況下，有一個從外部想要進來至內部網路的封包，如果路由器上的NAT路由表內沒有這封包的轉換資料，路由器就不知道要把封包丟到哪一台電腦上（其實這有某些方法可以解決，如DMZ或是先在路由器上建立路由規則，但這不是本篇文章討論重點）。

如果某一個公司，只想讓網路封包在公司內部流竄就好，不要進入到公共網路裡，避免商務機密外洩，在IPv4中只需將內部電腦的IP設為10/8、172.16/12、192.168/16這幾個網段即可；一旦換到了IPv6，可以利用2種方式達成：Unique-Local和Link-Local達成。

較為特別的是IPv6允許網路介面同時擁有公共IP、Unique-Local IP和Link-Local IP。當電腦想要傳送封包給隔壁，同一網域下的電腦，封包的目的地就可以填入上述3種IP的其中1種，即可傳送到想去的地方。

Link-Local

Link-Local的IP為1111111010開頭，接著是連續54個0，換成IPv6的寫法就是fe80::/10開頭，之後64個bit即為網路卡介面位址。這個位址的封包可以在同一個網域下傳遞，如同IPv4的192.168.1.1/24和192.168.1.2/24之間相互傳遞。這一類的封包並不會被傳遞到網際網路上，路由器會把他們攔截起來。

Unique-local

Unique-Local前身為Site-Local，只不過Site這個字眼定義較為不清楚，容易令人混淆，之後在2004年的RFC 3879文件中，建議把這部分的定義除去；隨後在2005年的RFC 4193文件中，重新定義了1組用以替代Site-Local功能的Unique-Local。

這個部分的前7位為1111110開頭，也就是fc00::/7，旗下還分為2個部分：fc00::/8和fd00::/8。fc00::/8目前尚未定義，fd00::/8的位址開頭為11111101，之後跟著40bits的亂數，再跟著16bits的子網路，最終的64bits則為網路介面卡的位址。

Unique-Local與Link-Local雖都是用以內部網路的位址區段，但卻有些許不同，Link-Local的封包只會在子網路下傳送，不會越過子網路的範圍。Unique-Local的封包可以越過單一子網路的範圍，跑到另一個子網路去，但封包並不會跑到網際網路上。

IPv4和IPv6的轉換並非一蹴可及，就如同之前電腦32位元和64位元轉換的陣痛期一樣，而且也可能因為某些因素，IPv4的設備並無法完全汰換掉，必須和IPv6之間相互轉換，目前有3種做法可以達到IPv4和IPv6的相容性。

Dual Stack（雙堆疊）
Tunneling（隧道）
NAT-PT（轉換）
Dual Stack（IPv4/IPv6雙堆疊）

這種方式算是相當的簡單，只要電腦或是網路上的路由器同時支援IPv4和IPv6即可，對於公司行號內部來說轉換相當容易，只需將網路節點換成支援Dual Stack的裝置即可，每個裝置同時擁有IPv4和IPv6位址，2種網路同時並存在公司內部，卻又不相互干擾。

這對於公司裡的資訊管理人員也相當省事，只需將新機器插上即可，所有IPv4的舊設定都可以沿用。新技術IPv6的部分，也可以先讓MIS摸透後再進行部署作業，不怕把原本的網路搞掛掉。

Dual Stack僅提供2種網路同時存在的可能性，2種網路之間並沒有什麼關聯，並無法互通。

而且對於網管人員來說，系統的複雜度大大增加，必須同時維護IPv4和IPv6的路由表和網管資訊，路由器的效能也被2種網路協定瓜分。



▲網路節點支援Dual Stack的時候，IPv4和IPv6網路可同時並存。

Tunneling（將IPv6封包再包一層IPv4）

隧道穿隧方法也相當容易理解，只要把IPv6的封包再包一層IPv4的表頭即可。一般來說這個方式使用在兩端支援IPv6，但中間網路節點只支援IPv4的情況下，介於IPv4和IPv6中間的網路裝置必須負責IPv6封包打包，和IPv4封包拆殼的動作。

那麼要如何得知IPv4封包內夾帶著IPv6封包呢，最簡單的方式就是把每個封包都拆開來看看，看看裡頭是否裝有IPv6的封包。但是這種方式太過消耗運算資源，不切實際。有人想到了一個方法，在IPv4表頭的網路協定部分，寫入41這個數值，只要路由器看到網路協定欄位為41，就知道這個IPv4封包裡裝著IPv6的東西，才把IPv4表頭拆掉。

使用隧道穿隧的方式，在封裝和解封裝的步驟進行時，會對網路裝置增加額外的運算負擔。

隧道穿隧還細分成許多種，以下我們簡單介紹3種：

6in4：6in4使用在2個IPv6網路使用IPv4相互連接的情境上，負責銜接IPv4和IPv6的網路節點必須明確指出是哪一台，並設定完成。這種方式較為麻煩，但除錯時較容易找出問題。

6to4：這種方式的優缺點剛好跟6in4相反，負責包裝和拆解封包的路由器為自動指派。6to4使用的是IPv4對應到IPv6上的位址，表示為2002:IPv4位址::/48。

Teredo：Teredo技術能夠提供IPv6的連線能力，給位於IPv4 NAT之後的電腦使用，IPv6位址中除了包含IPv4的位址外，更多了通訊埠訊息，供NAT轉換使用。



▲介於IPv4和IPv6網路之間的裝置，如果支援Tunneling的話，會將IPv6封包外再包一層IPv4的封包，並在IPv4的表頭，網路協議那一欄裡填入41，表示所乘載的資料為IPv6的封包。

NAT-PT（將 IPv4和IPv6協定轉換）

這種方法類似於IPv4的NAT機制，將公有IP和私有IP做轉換，以便內部網路和網際網路的電腦能夠互通有無。NAT-PT並非轉換公有IP和私有IP，而是將IPv4換IPv6的表頭相互轉換。

上2段所講的Dual Stack和Tunneling，都只能保證IPv6封包能夠正確傳送無誤，而無法讓使用不同協定的電腦相互通訊，唯有經過NAT-PT轉換後，使用IPv4的主機才能夠和使用IPv6的主機相互通訊。

路由器必須要知道哪些 IPv6的位址和IPv4的位址相互映射，才能夠正常執行轉換的工作。同時可以像傳統NAT的作法，這些映射能夠靜態設定，也能夠動態學習。

由於單一網路連線有著許多封包，假設這個連線經由某個NAT-PT裝置做轉換，則全部的封包都必須要經過這個裝置，即使之後其它的路由節點閒置，也無法轉換到其他路由途徑上。



▲支援NAT-PT的網路裝置，可以將IPv4的封包轉換為IPv6，反之也可以將IPv6的封包轉換為IPv4，只要如何映射的機制有做好，使用2種不同版本的終端裝置是可以相互通訊的。

我的路由器相容IPv6嗎？

IPv6 Forum成立IPv6 Ready Logo Program計畫，旨在提供消費者信心，也提供廠商一個可以遵循的規範，只要通過測試的產品，皆可獲得IPv6 Ready的標章。

IPv6 Ready Logo Program下有2種標章，銀質和金質，銀質認證（Phase-1）項目為最基礎的96項測試，僅能保證最基礎的互通性。銀質產品認證已於2011年11月停止申請，已通過銀質認證的產品終身有效，台灣產品約有117項獲得認證。

金質認證（Phase-2）完全包含銀質認證項目，另外還增加了1倍左右的核心測試項目。除了必測的IPv6 Core之外，還另外有9項的選測項目。台灣目前負責IPv6 Ready Logo Program認證的機構，只有位於桃園縣楊梅的中華電信研究院IPv6測試實驗室，而目前國內產品通過金質認證的產品約有256件。

有興趣購買IPv6認證產品的讀者，可以進入以下網站做查詢。http://v6product.ipv6.org.tw

HiNet Tunnel Broker試用報告

目前台灣比較容易嘗鮮到IPv6的方法，就是使用中華電信HiNet提供的Tunnel Broker服務。原理類似於隧道穿隧，首先利用PPPoE方式取得IPv4的位址，再利用Tunnel Broker軟體向Tunnel Broker伺服器取得IPv6位址。

這項服務只需要你是HiNet非固定制（就是上網要打帳號密碼那一種）客戶，就可以搶先體驗IPv6。

試用的結果，根本感覺不出來有任何的差異。隨便逛了逛幾個網站，網頁載入的時間跟IPv4差不多，唯一感受到有差的地方，就是以往使用IPv4去不了的網站，改用IPv6就可以正常觀看。

轉換是條漫長的路

其實IPv6的東西還相當多，包含一些IPv4沒有的概念，如無主機自動配發IP等的新功能，但由於本次篇幅有限，僅能介紹些基礎概念。

家用路由器最近各廠都在飆速度，從有線的1Gbps，到無線的450Mbps，但卻鮮少有商家強調自身產品對於IPv6的相容性，就算是已通過IPv6金質認證的產品也是一樣；如果讀者近期有考慮購買高效能家用路由器，不妨多注意一下這類資訊。



